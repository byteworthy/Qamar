---
phase: 02-server-test-coverage
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - server/__tests__/billing.test.ts
autonomous: true

must_haves:
  truths:
    - "Stripe webhook handling has integration tests"
    - "Billing logic tested"
---

<objective>
Add integration tests for billing/Stripe webhooks.

Purpose: Verify billing webhooks work correctly.

Output: Integration test file for Stripe webhooks.
</objective>

<execution_context>
@C:\Users\richa\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\richa\.claude/get-shit-done/templates/summary.md
</execution_context>

<tasks>

<task type="auto">
  <name>Task 1: Create billing integration tests</name>
  <files>server/__tests__/billing.test.ts</files>
  <action>
Create integration test for Stripe webhooks:

```typescript
describe('Stripe Webhooks', () => {
  it('should handle subscription created', async () => {
    // Test webhook handling
  });

  it('should handle payment failed', async () => {
    // Test error scenarios
  });
});
```
  </action>
  <verify>
- npm test passes
- Webhook logic tested
  </verify>
  <done>Billing tests created</done>
</task>

<task type="auto">
  <name>Task 2: Run tests</name>
  <files>-</files>
  <action>
```bash
npm test
```
  </action>
  <verify>
- All tests pass
- Coverage >70%
  </verify>
  <done>Tests verified</done>
</task>

</tasks>

<success_criteria>
1. Billing integration tests created
2. Tests pass
3. Code committed with TEST-08 reference
</success_criteria>

<output>
After completion, create .planning/phases/02-server-test-coverage/02-03-SUMMARY.md
</output>
