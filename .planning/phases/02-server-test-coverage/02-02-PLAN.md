---
phase: 02-server-test-coverage
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - server/__tests__/conversational-ai.test.ts
  - server/__tests__/tone-compliance-checker.test.ts
autonomous: true

must_haves:
  truths:
    - "conversational-ai.ts has unit tests"
    - "tone-compliance-checker.ts has unit tests"
    - "AI orchestration logic tested"
---

<objective>
Add unit tests for conversational-ai.ts and tone-compliance-checker.ts.

Purpose: Test AI orchestration and safety systems.

Output: Test files covering AI logic and tone checking.
</objective>

<execution_context>
@C:\Users\richa\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\richa\.claude/get-shit-done/templates/summary.md
</execution_context>

<tasks>

<task type="auto">
  <name>Task 1: Create conversational-ai tests</name>
  <files>server/__tests__/conversational-ai.test.ts</files>
  <action>
Create test file for conversational-ai.ts:

```typescript
import { generateResponse } from '../conversational-ai';

describe('Conversational AI', () => {
  it('should generate appropriate responses', async () => {
    const result = await generateResponse({
      message: 'test',
      context: {}
    });
    expect(result).toBeDefined();
  });

  it('should handle errors gracefully', async () => {
    // Test error handling
  });
});
```
  </action>
  <verify>
- npm test passes
- conversational-ai.ts has test coverage
  </verify>
  <done>Conversational AI tested</done>
</task>

<task type="auto">
  <name>Task 2: Create tone compliance tests</name>
  <files>server/__tests__/tone-compliance-checker.test.ts</files>
  <action>
Create test file for tone-compliance-checker.ts:

Test tone checking logic, safety triggers, compliance rules.
  </action>
  <verify>
- npm test passes
- tone-compliance-checker.ts has coverage
  </verify>
  <done>Tone checker tested</done>
</task>

<task type="auto">
  <name>Task 3: Run coverage</name>
  <files>-</files>
  <action>
```bash
npm test -- --coverage
```

Verify coverage increased.
  </action>
  <verify>
- Coverage >70% overall
- Tests pass
  </verify>
  <done>Coverage verified</done>
</task>

</tasks>

<success_criteria>
1. conversational-ai.ts has test coverage
2. tone-compliance-checker.ts has test coverage
3. Tests pass
4. Code committed with TEST-02, TEST-03 reference
</success_criteria>

<output>
After completion, create .planning/phases/02-server-test-coverage/02-02-SUMMARY.md
</output>
