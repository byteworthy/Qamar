# =============================================================================
# NOOR CBT - Environment Configuration Template
# =============================================================================
# Copy this file to .env and replace CHANGEME values with real configuration.
# For validation testing, VALIDATION_MODE=true allows running without real keys.
# =============================================================================

# -----------------------------------------------------------------------------
# VALIDATION MODE
# -----------------------------------------------------------------------------
# Set to "true" for tester validation without external services
# Set to "false" for production use with real API keys
VALIDATION_MODE=true

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
PORT=5000
NODE_ENV=development

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
# Required for data persistence. In validation mode, missing DB will use in-memory.
DATABASE_URL=postgresql://user:CHANGEME@localhost:5432/noor_cbt

# -----------------------------------------------------------------------------
# AI INTEGRATION (Anthropic Claude)
# -----------------------------------------------------------------------------
# Required for AI-powered reflection analysis.
# In VALIDATION_MODE=true with CHANGEME key, routes return placeholder responses.
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-CHANGEME

# -----------------------------------------------------------------------------
# BILLING (Stripe - WEB ONLY, never used for mobile)
# -----------------------------------------------------------------------------
# IMPORTANT: Mobile (iOS/Android) billing uses Apple IAP / Google Play via
# RevenueCat (react-native-purchases). Stripe is ONLY for web subscriptions.
# If you only serve mobile clients, leave these as CHANGEME to disable Stripe.
# In VALIDATION_MODE=true, billing routes are disabled.
STRIPE_SECRET_KEY=sk_test_CHANGEME
STRIPE_WEBHOOK_SECRET=whsec_CHANGEME

# Explicit domain for Stripe webhooks (recommended for production)
# Falls back to first domain in REPLIT_DOMAINS if not set
# STRIPE_WEBHOOK_DOMAIN=your-production-domain.com

# -----------------------------------------------------------------------------
# REPLIT (Only needed if deploying to Replit)
# -----------------------------------------------------------------------------
# REPLIT_DOMAINS=your-app.repl.co
# REPLIT_DEV_DOMAIN=your-app.repl.co

# -----------------------------------------------------------------------------
# DATA ENCRYPTION
# -----------------------------------------------------------------------------
# 32-character hex string for encrypting sensitive user data
# Generate with: node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
ENCRYPTION_KEY=CHANGEME_32_CHAR_HEX_STRING_HERE

# -----------------------------------------------------------------------------
# SECURITY
# -----------------------------------------------------------------------------
# Session secret for HMAC-signed session tokens (required in production)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=CHANGEME_64_CHAR_HEX_STRING_HERE

# CSRF secret for cross-site request forgery protection
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CSRF_SECRET=CHANGEME_64_CHAR_HEX_STRING_HERE

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
# Log level: error, warn, info, http, debug (defaults: production=info, dev=debug)
LOG_LEVEL=info

# Directory for log files (only used in production)
LOG_DIRECTORY=./logs

# Additional comma-separated patterns to treat as sensitive and redact from logs
SENSITIVE_LOG_PATTERNS=
