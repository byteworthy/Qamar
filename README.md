<p align="center">
  <img src="assets/images/noor-icon.svg" width="120" alt="Noor" />
</p>

<h1 align="center">Noor</h1>

<p align="center">
  <strong>The AI-Powered Islamic Companion</strong><br/>
  Quran &middot; Arabic Learning &middot; Prayer &middot; Reflection &middot; All in One
</p>

<p align="center">
  <img src="https://img.shields.io/badge/version-2.0.0-D4AF37?style=flat-square" />
  <img src="https://img.shields.io/badge/tests-675%20passing-00C853?style=flat-square" />
  <img src="https://img.shields.io/badge/TypeScript-0%20errors-3178C6?style=flat-square" />
  <img src="https://img.shields.io/badge/platform-iOS%20%7C%20Android-2d6cdf?style=flat-square" />
  <img src="https://img.shields.io/badge/offline-first-7c3aed?style=flat-square" />
</p>

<p align="center">
  <a href="https://github.com/byteworthy/Noor/actions/workflows/ci.yml"><img src="https://github.com/byteworthy/Noor/workflows/CI/badge.svg" alt="CI" /></a>
  <a href="https://github.com/byteworthy/Noor/actions/workflows/security.yml"><img src="https://github.com/byteworthy/Noor/workflows/Security%20Analysis/badge.svg" alt="Security" /></a>
</p>

---

Noor replaces the 5+ Islamic apps on your phone with one. It combines a full Quran reader with 8 reciters, an AI Arabic language tutor, pronunciation coach with real-time feedback, prayer times, hadith collections, guided reflection, and gamified learning — all powered by AI, all offline-capable, and all ad-free.

---

## What Makes Noor Different

<table>
<tr>
<td width="50%">

### vs. Muslim Pro
- No ads. Ever.
- AI Arabic tutor and pronunciation coach
- Word-by-word Quran audio with highlighting
- Tajweed color-coded display (17 rules)
- Gamified streaks and badges
- Structured reflection with AI insights

</td>
<td width="50%">

### vs. Tarteel AI
- Full Islamic companion, not just Quran
- Prayer times, hadith, adhkar, dua collections
- AI translation with root word analysis
- Arabic vocabulary flashcards (FSRS)
- Personal reflection and journaling
- Everything Tarteel does + everything else

</td>
</tr>
</table>

---

## Features

### Quran

<table>
<tr><td width="60">

**8**

</td><td>

**Reciters** with dual-CDN fallback (Al Quran Cloud + EveryAyah) — Alafasy, Al-Sudais, Ash-Shuraim, Al-Husary, Abdul Samad, Al-Muaiqly, Al-Minshawi, Al-Ajamy

</td></tr>
<tr><td>

**W×W**

</td><td>

**Word-by-Word Audio** — Each word plays individually with gold highlighting. Uses Quran.com CDN. Tap a word, hear it, see it highlighted.

</td></tr>
<tr><td>

**17**

</td><td>

**Tajweed Rules** — Color-coded Arabic text (ghunnah, ikhfa, idgham, iqlab, qalqalah, madd, and more). Toggle on/off per verse. Full guide screen with color legend.

</td></tr>
</table>

### AI Arabic Language Suite

<table>
<tr><td width="60">

**AI**

</td><td>

**Arabic Tutor** — Conversational AI tutor powered by Claude Haiku. Four modes: vocabulary drill, grammar explanation, conversation practice, Quran word analysis.

</td></tr>
<tr><td>

**MIC**

</td><td>

**Pronunciation Coach** — Record yourself reciting, on-device STT transcribes, server scores accuracy (Levenshtein + character diff), AI gives specific pronunciation tips.

</td></tr>
<tr><td>

**TTS**

</td><td>

**Text-to-Speech** — On-device Arabic TTS via `expo-speech`. Hear any vocabulary word, dua, or verse pronounced. Speaker button on flashcards and vocabulary screens.

</td></tr>
<tr><td>

**TR**

</td><td>

**Translation** — Arabic-English translation with transliteration. Free APIs (MyMemory + Google). AI root word analysis explains morphology and Quranic usage.

</td></tr>
</table>

### Prayer & Worship

<table>
<tr><td width="60">

**5x**

</td><td>

**Prayer Times** — Precise calculations via Adhan library. Location-based. Multiple calculation methods (Umm al-Qura, MWL, ISNA, etc.)

</td></tr>
<tr><td>

**QIB**

</td><td>

**Qibla Compass** — Device-sensor compass with calibration guidance and directional accuracy.

</td></tr>
<tr><td>

**100+**

</td><td>

**Adhkar & Duas** — Morning, evening, post-prayer, and situational adhkar with tap counters. Curated dua collection.

</td></tr>
<tr><td>

**HIJ**

</td><td>

**Islamic Calendar** — Hijri date conversion, Ramadan tracking, Islamic event awareness.

</td></tr>
</table>

### Learning & Growth

<table>
<tr><td width="60">

**356**

</td><td>

**Arabic Vocabulary** — Flashcards with FSRS spaced-repetition algorithm. Progressive difficulty. TTS pronunciation on every card.

</td></tr>
<tr><td>

**200+**

</td><td>

**Hadith Library** — Authentic hadiths from Kutub al-Sittah. Searchable. RAG-powered semantic search across 6,241 knowledge base documents.

</td></tr>
<tr><td>

**XP**

</td><td>

**Gamification** — Daily streaks, 12 badges (First Light, Seeker, Steadfast, Hafiz in Training...), activity tracking across 10 activity types, weekly summaries.

</td></tr>
<tr><td>

**30**

</td><td>

**Ramadan Mode** — Special Ramadan features, fasting tracker, iftar duas, 30-day challenge. Activates automatically during Ramadan.

</td></tr>
</table>

### Companion (AI Reflection)

<table>
<tr><td width="60">

**CBT**

</td><td>

**Structured Reflection** — AI-powered thought pattern recognition (Claude by Anthropic). Islamic reframing with Quranic wisdom. Not therapy — structured self-clarity.

</td></tr>
<tr><td>

**988**

</td><td>

**Safety System** — Built-in crisis detection routes to 988 Suicide & Crisis Lifeline. Safety guardrail, not a clinical feature.

</td></tr>
</table>

---

## Pricing

<table>
<tr>
<th></th>
<th align="center">Free</th>
<th align="center">Plus — $2.99/mo</th>
<th align="center">Pro — $11.99/mo</th>
</tr>
<tr>
<td><strong>Quran (8 reciters, tajweed, word-by-word)</strong></td>
<td align="center">Full</td>
<td align="center">Full</td>
<td align="center">Full</td>
</tr>
<tr>
<td><strong>Prayer times, qibla, hadith, adhkar</strong></td>
<td align="center">Full</td>
<td align="center">Full</td>
<td align="center">Full</td>
</tr>
<tr>
<td><strong>Arabic TTS (on-device)</strong></td>
<td align="center">Full</td>
<td align="center">Full</td>
<td align="center">Full</td>
</tr>
<tr>
<td><strong>Translation (free APIs)</strong></td>
<td align="center">Full</td>
<td align="center">Full</td>
<td align="center">Full</td>
</tr>
<tr>
<td><strong>Gamification (streaks, badges)</strong></td>
<td align="center">Full</td>
<td align="center">Full</td>
<td align="center">Full</td>
</tr>
<tr>
<td><strong>AI calls (tutor, pronunciation, translation)</strong></td>
<td align="center">3/day</td>
<td align="center">Unlimited</td>
<td align="center">Unlimited</td>
</tr>
<tr>
<td><strong>Reflection sessions</strong></td>
<td align="center">Limited</td>
<td align="center">Unlimited</td>
<td align="center">Unlimited</td>
</tr>
<tr>
<td><strong>All reflection personas</strong></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">All</td>
</tr>
<tr>
<td><strong>Advanced analytics</strong></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">Full</td>
</tr>
</table>

All Quran audio, TTS, tajweed, basic translation, prayer times, and hadith are **free forever**. AI features use Claude Haiku at ~$0.002/call — sustainable at scale.

---

## Tech Stack

```
CLIENT                              SERVER                          INFRASTRUCTURE
React Native 0.81                   Express.js                      Railway (backend)
Expo SDK 54                         Drizzle ORM                     PostgreSQL
TypeScript 5.9                      Anthropic Claude (Haiku)        Sentry (monitoring)
React Navigation 7.x               Winston (logging)               EAS Build + Submit
Zustand + TanStack Query            HMAC-SHA256 auth                expo-updates (OTA)
expo-speech (TTS)                   AES-256-GCM encryption          RevenueCat (IAP)
@react-native-voice/voice (STT)    RAG engine (6,241 docs)         GitHub Actions (CI)
expo-av (audio + recording)         Rate limiting + quotas
```

---

## Architecture

```
noor/
  client/                           # React Native mobile app
    components/                     #   Reusable UI (GlassCard, TajweedText, TTSButton, ...)
    screens/                        #   5 tabs: Home, Companion, Learn, Worship, Profile
      learn/                        #   Arabic tutor, pronunciation, translator, tajweed, Quran
    hooks/                          #   Custom hooks (useQuranAudio, useTTS, useSTT, ...)
    stores/                         #   Zustand (gamification, study state, app state)
    services/                       #   Audio, tajweed parser, speech, word-by-word
    navigation/                     #   React Navigation stack + tab config
  server/                           # Express.js backend
    routes/                         #   API endpoints (tutor, pronunciation, translation, ...)
    services/                       #   AI prompts, scoring, RAG, translation
    middleware/                     #   Auth, rate limiting, AI daily quota
    __tests__/                      #   675 tests
  shared/                           # Shared types, seed data (6,236 Quran verses)
  docs/plans/                       # Approved design documents
  release/                          # App Store submission materials
  e2e/                              # Maestro E2E test flows
  legal/                            # Privacy Policy, Terms of Service
```

---

## Quick Start

```bash
git clone https://github.com/byteworthy/Noor.git
cd Noor
npm install
cp .env.example .env               # Add your ANTHROPIC_API_KEY + DATABASE_URL
```

```bash
# Terminal 1 — Backend
npm run server:dev

# Terminal 2 — Mobile
npx expo start
```

```bash
# Verify
npm test                            # 675 tests
npx tsc --noEmit                    # 0 errors
```

> **Note:** `@react-native-voice/voice` (pronunciation coach) requires a dev build, not Expo Go.
> Run `eas build --profile development` for full feature testing.

---

## Audio Sources

All free, all HTTPS, no API keys needed:

| Source | Use | Pattern |
|--------|-----|---------|
| Al Quran Cloud CDN | Verse audio (primary) | `cdn.islamic.network/quran/audio/128/{edition}/{ayah}.mp3` |
| EveryAyah.com | Verse audio (fallback) | `everyayah.com/data/{Reciter}/{SSSAAA}.mp3` |
| Quran.com CDN | Word-by-word audio | `audio.qurancdn.com/wbw/{SSS}_{AAA}_{WWW}.mp3` |

---

## Security & Privacy

| Protection | Implementation |
|-----------|---------------|
| Reflection encryption | AES-256-GCM |
| Authentication | Biometric (Face ID / Touch ID) + HMAC-SHA256 |
| Key storage | iOS Keychain / Android Keystore |
| Sensitive screens | Screenshot prevention |
| Device integrity | Jailbreak / root detection |
| Network | HTTPS-only with certificate validation |
| Data retention | 30-day automatic cleanup |
| User control | Full data export + deletion |

See [SECURITY.md](SECURITY.md) for the full security model.

---

## AI Boundaries

Noor uses Claude by Anthropic for reflection, tutoring, and pronunciation feedback:

- AI does **not** diagnose, prescribe, or replace professional therapy
- Crisis situations trigger immediate professional resource referrals (988 Lifeline)
- Islamic content aligns with mainstream scholarship — no fatawa issued
- Anthropic does not train on user data
- All AI interactions follow a documented safety charter

---

## Roadmap

- [x] **Phase 1-2** — Quran audio (8 reciters), word-by-word, tajweed, TTS, STT
- [x] **Phase 3** — Server endpoints (AI tutor, pronunciation, translation)
- [x] **Phase 4** — Feature screens (Arabic tutor, pronunciation coach, translator)
- [x] **Phase 5** — Full integration (navigation, premium gating, gamification, 675 tests)
- [ ] **Phase 6** — Hifz memorization (FSRS), AI tafsir, dua recommender, study plans, verse conversation

Phase 6 design is approved: [`docs/plans/2026-02-16-hifz-and-deep-ai-design.md`](docs/plans/2026-02-16-hifz-and-deep-ai-design.md)

---

## Server Cost (at 1K users)

| Service | Monthly |
|---------|---------|
| AI tutor (Claude Haiku) | ~$12 |
| Pronunciation coach | ~$6 |
| Translation (AI explain) | ~$9 |
| Quran audio, TTS, tajweed | $0 |
| Basic translation (free APIs) | $0 |
| **Total** | **~$27/mo** |

---

## Contributing

Post-launch contribution areas:

- Arabic, Urdu, Bahasa, Turkish, and French localization
- Accessibility (VoiceOver, TalkBack)
- Additional Islamic content (hadith, scholars' quotes, duas)
- Android-specific optimizations
- Test coverage expansion

---

## License

[MIT License](LICENSE)

---

<p align="center">
  <strong>Support:</strong> scale@getbyteworthy.com &middot;
  <strong>Security:</strong> security@getbyteworthy.com &middot;
  <strong>Privacy:</strong> privacy@getbyteworthy.com
</p>

<p align="center">
  <em>Bismillah. May this project serve as a means of benefit for the ummah.</em>
</p>

<p align="center">
  <em>"Allah does not burden a soul beyond that it can bear."</em> — Quran 2:286
</p>
