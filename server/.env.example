# =============================================================================
# NOOR CBT SERVER - Environment Configuration Template
# =============================================================================
# Copy this file to server/.env for local server development.
# Or use the root .env which the server reads from process.env.
# =============================================================================

# -----------------------------------------------------------------------------
# VALIDATION MODE (Server)
# -----------------------------------------------------------------------------
# When "true", server runs in validation mode:
# - AI routes return placeholder responses instead of calling Claude API
# - Billing/Stripe initialization is skipped if not configured
# - Missing API keys don't crash the server
#
# Set to "false" for production with real API keys.
VALIDATION_MODE=true

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
PORT=5000
NODE_ENV=development

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
# Required for data persistence.
# In validation mode, missing DB logs a warning but doesn't crash.
DATABASE_URL=postgresql://user:CHANGEME@localhost:5432/noor_cbt

# -----------------------------------------------------------------------------
# AI INTEGRATION (Anthropic Claude)
# -----------------------------------------------------------------------------
# Required for AI-powered reflection analysis.
# In VALIDATION_MODE=true with CHANGEME key, routes return placeholder responses.
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-CHANGEME

# -----------------------------------------------------------------------------
# BILLING (Stripe - Server-side, not used for mobile IAP)
# -----------------------------------------------------------------------------
# Mobile billing uses Apple/Google IAP directly.
# These are only for web/admin billing if applicable.
STRIPE_SECRET_KEY=sk_test_CHANGEME
STRIPE_WEBHOOK_SECRET=whsec_CHANGEME

# Explicit domain for Stripe webhooks (recommended for production)
# Falls back to first domain in REPLIT_DOMAINS if not set
# STRIPE_WEBHOOK_DOMAIN=your-production-domain.com

# -----------------------------------------------------------------------------
# DATA ENCRYPTION
# -----------------------------------------------------------------------------
# 32-character hex string for encrypting sensitive user data at rest.
# Generate with: node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
ENCRYPTION_KEY=CHANGEME_32_CHAR_HEX_STRING_HERE
